<!DOCTYPE html>
<html>
<head>
<title>Upload Files</title>
<script src="/siofu/client.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="https://code.jquery.com/jquery-1.11.1.js"></script>
<script type="text/javascript">
$(function(){
  var socket = io.connect();
  var siofu = new SocketIOFileUpload(socket);

  // Configure the three ways that SocketIOFileUpload can read files:
  // document.getElementById("upload_btn").addEventListener("click", siofu.prompt, false);
  // siofu.listenOnInput(document.getElementById("upload_input"));
  // siofu.listenOnDrop(document.getElementById("file_drop"));

  $("#submit").click(function(){
    var files = $("#upload_input").prop("files")
    console.log(files);

    siofu.submitFiles(files);
  });

  // Do something on upload progress:
  siofu.addEventListener("progress", function(event){
      var percent = event.bytesLoaded / event.file.size * 100;
      console.log("File is", percent.toFixed(2), "percent loaded");
  });

  // Do something when a file is uploaded:
  siofu.addEventListener("complete", function(event){
      console.log(event.success);
      console.log(event.file);
  });
})
</script>

</head>
<body>

<p><label>Choose File: <input type="file" id="upload_input" multiple/></label></p>
<div id="file_drop" dropzone="copy" title="drop files for upload" ondrop="function(e){e.preventDefault();}">Drop File</div>

<p><button type="file" id="submit">Upload</button></p>

</body>
</html>
